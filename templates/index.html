{% extends "base.html" %}

{% block content %}
<div class="container" style="display: flex; flex-direction: column; align-items: center; width: 100%;">
    <div class="card hero" style="margin-bottom: 2rem; max-width: 900px;">
        <h1>í™˜ì˜í•©ë‹ˆë‹¤!</h1>
        {% if current_user.is_authenticated %}
        <p>ì•ˆë…•í•˜ì„¸ìš”, <strong>{{ current_user.name }}</strong>ë‹˜!</p>
        {% if current_user.is_admin %}
        <span class="admin-badge">ADMIN</span>
        {% endif %}
        {% else %}
        <p
            style="color: #fbbf24; font-weight: 700; margin-top: 1rem; font-size: 1.1rem; text-decoration: underline; text-underline-offset: 4px;">
            ë¡œê·¸ì¸ì „ í•„ë… ê¼­ í™•ì¸í•´ì£¼ì„¸ìš”
        </p>
        {% endif %}
    </div>

    <div class="card" style="max-width: 900px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <h2 style="margin-bottom: 0; text-align: left;">ê²Œì‹œíŒ</h2>
            {% if current_user.is_authenticated %}
            <a href="{{ url_for('main.new_post') }}" class="btn"
                style="width: auto; padding: 0.6rem 1.2rem; margin-top: 0;">ê¸€ì“°ê¸°</a>
            {% endif %}
        </div>

        {% if posts %}
        <div style="display: grid; gap: 1rem;">
            {% for post in posts %}
            <a href="{{ url_for('main.post_detail', post_id=post.id) }}" style="text-decoration: none; color: inherit;">
                <div style="padding: 1.5rem; background: {% if post.is_pinned %}rgba(59, 130, 246, 0.1){% else %}rgba(15, 23, 42, 0.3){% endif %}; border-radius: 1rem; border: 1px solid {% if post.is_pinned %}var(--primary){% else %}var(--glass-border){% endif %}; transition: transform 0.2s, border-color 0.2s;"
                    onmouseover="this.style.borderColor='var(--primary)'; this.style.transform='translateY(-3px)'"
                    onmouseout="this.style.borderColor='{% if post.is_pinned %}var(--primary){% else %}var(--glass-border){% endif %}'; this.style.transform='translateY(0)'">
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem;">
                        <h3
                            style="font-size: 1.25rem; font-weight: 700; display: flex; align-items: center; gap: 0.5rem;">
                            {% if post.is_pinned %}
                            <span
                                style="font-size: 0.7rem; background: var(--primary); color: white; padding: 0.2rem 0.5rem; border-radius: 0.4rem;">ğŸ“Œ
                                ê³ ì •</span>
                            {% endif %}
                            {{ post.title }}
                        </h3>
                        <span style="font-size: 0.75rem; color: var(--text-muted);">{{
                            post.date_posted.strftime('%Y-%m-%d') }}</span>
                    </div>
                    <p
                        style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">
                        {{ post.content }}
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 0.8rem; color: var(--primary); font-weight: 600;">{{ post.author_name
                            }}</span>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div style="text-align: center; padding: 3rem; color: var(--text-muted);">
            <p>ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}